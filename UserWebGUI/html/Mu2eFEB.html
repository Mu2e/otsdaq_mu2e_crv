<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mu2e</title>
    
    <script type="text/JavaScript" src="/WebPath/js/Globals.js"></script>   
    <script type="text/JavaScript" src="/WebPath/js/Debug.js"></script>     
    <script type="text/JavaScript" src="/WebPath/UserWebPath/js/mu2e.js"></script>
    <!--<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">-->
    <link rel="stylesheet" href="/WebPath/UserWebPath/css/mu2e.css"> 
</head>
<body class="mu2e" onload="mu2e_init('FEB')">
    <script>
        async function cmbendaCmd() { // Default: all
            const dtcName = new URLSearchParams(window.location.search).get('dtc')
            const dtcLink = new URLSearchParams(window.location.search).get('link')
            //const dtcLink = new URLSearchParams(window.location.search).get('port')
            if((dtcName != undefined) && (dtcLink != undefined)) {
                febCMBENA(val="1", dtcName, dtcLink)
            }
        }
        async function setBiasCmd(fpga, no) { // Default: all
            const value = document.querySelector("#bias_"+fpga+"_"+no)
            if(value == undefined) return;
            const val = value.value;
            const dtcName = new URLSearchParams(window.location.search).get('dtc')
            const dtcLink = new URLSearchParams(window.location.search).get('link')
            //const rocPort = new URLSearchParams(window.location.search).get('port')
            if((dtcName != undefined) && (dtcLink != undefined)) {
                console.log("DEBUG", val, fpga, no, dtcName, dtcLink)
                let res = await febSetBias(val, fpga, no, dtcName, dtcLink, "Default")
                const write_time  = new Date(res["feMacroExec"]["ROC FEMacro - FEB Set Bias"]["exec_time"])
                console.log(write_time)
                let div = document.querySelector("#bias_"+fpga+"_"+no+"_c");
                if(div) addTime(div, write_time);
            }
        }
    </script>
    <div id="mu2e_header">mu2e</div>
    <div id="mu2e_nav"></div>
    <div id="mu2e_main">
        <!--<div class="mu2e_container">-->
            <div id="mu2e_feb" class="mu2e_container mu2e_grid">
                <div class="mu2e_title"                                     style="grid-column: 1/7; grid-row: 1">FEB</div>

                <div style="grid-column: 1/3; grid-row: 2;" class="mu2e_list">Temperature:</div>
                <div style="grid-column: 2;   grid-row: 2;" class="mu2e_list" name="mu2e_dcs"  data="temperature" format="2" units="V">Value</div>
                <div style="grid-column: 3/5; grid-row: 2;" class="mu2e_list">15V pos:</div>
                <div style="grid-column: 4;   grid-row: 2;" class="mu2e_list" name="mu2e_dcs"  data="15Vpos" format="2" units="V">Value</div>
                <div style="grid-column: 5/7; grid-row: 2;" class="mu2e_list">1.2V pos:</div>
                <div style="grid-column: 6;   grid-row: 2;" class="mu2e_list" name="mu2e_dcs"  data="1_2Vpos" format="2" units="V">Value</div>
                <div style="grid-column: 1/3; grid-row: 3;" class="mu2e_list">1.8V pos:</div>
                <div style="grid-column: 2;   grid-row: 3;" class="mu2e_list" name="mu2e_dcs"  data="1_8Vpos" format="2" units="V">Value</div>
                <div style="grid-column: 3/5; grid-row: 3;" class="mu2e_list">3.3V pos:</div>
                <div style="grid-column: 4;   grid-row: 3;" class="mu2e_list" name="mu2e_dcs"  data="3_3Vpos" format="2" units="V">Value</div>
                <div style="grid-column: 5/7; grid-row: 3;" class="mu2e_list">5V neg:</div>
                <div style="grid-column: 6;   grid-row: 3;" class="mu2e_list" name="mu2e_dcs"  data="5Vneg" format="2" units="V">Value</div>
                <div style="grid-column: 1/3; grid-row: 4;" class="mu2e_list">5V pos:</div>
                <div style="grid-column: 2;   grid-row: 4;" class="mu2e_list" name="mu2e_dcs"  data="5Vpos" format="2" units="V">Value</div>
                <div style="grid-column: 3/5; grid-row: 4;" class="mu2e_list">10V pos:</div>
                <div style="grid-column: 4;   grid-row: 4;" class="mu2e_list" name="mu2e_dcs"  data="10Vpos" format="2" units="C">Value</div>               
            </div>
            <div id="mu2e_dtc_links" class="mu2e_container mu2e_grid">
                <div style="grid-column: 1/6; grid-row: 1" class="mu2e_title">Channel Groups</div>
                <!--<div style="grid-column: 2; grid-row: 2;" class="mu2e_list">FPGA 0:</div>
                <div style="grid-column: 3; grid-row: 2;" class="mu2e_list">FPGA 1:</div>
                <div style="grid-column: 4; grid-row: 2;" class="mu2e_list">FPGA 2:</div>
                <div style="grid-column: 5; grid-row: 2;" class="mu2e_list">FPGA 3:</div>-->

                <div style="grid-column: 1; grid-row: 4/8;" class="mu2e_list">FPGA 0:</div>
                <div style="grid-column: 1; grid-row: 8/12;" class="mu2e_list">FPGA 1:</div>
                <div style="grid-column: 1; grid-row: 12/16;" class="mu2e_list">FPGA 2:</div>
                <div style="grid-column: 1; grid-row: 16/20;" class="mu2e_list">FPGA 3:</div>

                <div style="grid-column: 3; grid-row: 3;" class="mu2e_list">Bias</div>
                <div style="grid-column: 3; grid-row: 4/6;" class="mu2e_list" name="mu2e_dcs"  data="Bias_0" format="2" units="V">Value</div>
                <div style="grid-column: 3; grid-row: 6/8;" class="mu2e_list" name="mu2e_dcs"  data="Bias_1" format="2" units="V">Value</div>
                <div style="grid-column: 3; grid-row: 8/10;" class="mu2e_list" name="mu2e_dcs"  data="Bias_2" format="2" units="V">Value</div>
                <div style="grid-column: 3; grid-row: 10/12;" class="mu2e_list" name="mu2e_dcs"  data="Bias_3" format="2" units="V">Value</div>  
                <div style="grid-column: 3; grid-row: 12/14;" class="mu2e_list" name="mu2e_dcs"  data="Bias_4" format="2" units="V">Value</div>  
                <div style="grid-column: 3; grid-row: 14/16;" class="mu2e_list" name="mu2e_dcs"  data="Bias_5" format="2" units="V">Value</div>  
                <div style="grid-column: 3; grid-row: 16/18;" class="mu2e_list" name="mu2e_dcs"  data="Bias_6" format="2" units="V">Value</div>  
                <div style="grid-column: 3; grid-row: 18/20;" class="mu2e_list" name="mu2e_dcs"  data="Bias_7" format="2" units="V">Value</div>  
 
                <div style="grid-column: 4/6; grid-row: 3;" class="mu2e_list">Bias DAC</div>
                <div style="grid-column: 4; grid-row: 4/6;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_0" format="hex">Value</div>
                <div style="grid-column: 4; grid-row: 6/8;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_1" format="hex">Value</div>
                <div style="grid-column: 4; grid-row: 8/10;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_2" format="hex">Value</div>
                <div style="grid-column: 4; grid-row: 10/12;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_3" format="hex">Value</div>
                <div style="grid-column: 4; grid-row: 12/14;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_4" format="hex">Value</div>
                <div style="grid-column: 4; grid-row: 14/16;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_5" format="hex">Value</div>
                <div style="grid-column: 4; grid-row: 16/18;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_6" format="hex">Value</div>
                <div style="grid-column: 4; grid-row: 18/20;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_7" format="hex">Value</div>

                <div style="grid-column: 2; grid-row: 3;" class="mu2e_list">CMB Temperature</div>
                <div style="grid-column: 2; grid-row: 4;" class="mu2e_list" name="mu2e_dcs"  data="CMB0_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 5;" class="mu2e_list" name="mu2e_dcs"  data="CMB1_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 6;" class="mu2e_list" name="mu2e_dcs"  data="CMB2_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 7;" class="mu2e_list" name="mu2e_dcs"  data="CMB3_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 8;" class="mu2e_list" name="mu2e_dcs"  data="CMB4_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 9;" class="mu2e_list" name="mu2e_dcs"  data="CMB5_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 10;" class="mu2e_list" name="mu2e_dcs"  data="CMB6_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 11;" class="mu2e_list" name="mu2e_dcs"  data="CMB7_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 12;" class="mu2e_list" name="mu2e_dcs"  data="CMB8_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 13;" class="mu2e_list" name="mu2e_dcs"  data="CMB9_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 14;" class="mu2e_list" name="mu2e_dcs"  data="CMB10_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 15;" class="mu2e_list" name="mu2e_dcs"  data="CMB11_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 16;" class="mu2e_list" name="mu2e_dcs"  data="CMB12_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 17;" class="mu2e_list" name="mu2e_dcs"  data="CMB13_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 18;" class="mu2e_list" name="mu2e_dcs"  data="CMB14_temperature" format="2" units="C">Value</div>
                <div style="grid-column: 2; grid-row: 19;" class="mu2e_list" name="mu2e_dcs"  data="CMB15_temperature" format="2" units="C">Value</div>

                <div style="grid-column: 5; grid-row: 4/6;" class="mu2e_list" id="bias_0_0_c">
                    <input type="text" id="bias_0_0" size="8" value="0x000"></input>&nbsp;
                    <button onclick="setBiasCmd(0,0);">set &#10095;</button>
                </div>
                <div style="grid-column: 5; grid-row: 6/8;" class="mu2e_list" id="bias_0_1_c">
                    <input type="text" id="bias_0_1" size="8" value="0x000"></input>&nbsp;
                    <button onclick="setBiasCmd(0,1);">set &#10095;</button>
                </div>
                <div style="grid-column: 5; grid-row: 8/10;" class="mu2e_list" id="bias_1_0_c">
                    <input type="text" id="bias_1_0" size="8" value="0x000"></input>&nbsp;
                    <button onclick="setBiasCmd(1,0);">set &#10095;</button>
                </div>
                <div style="grid-column: 5; grid-row: 10/12;" class="mu2e_list" id="bias_1_1_c">
                    <input type="text" id="bias_1_1" size="8" value="0x000"></input>&nbsp;
                    <button onclick="setBiasCmd(1,1);">set &#10095;</button>
                </div>
                <div style="grid-column: 5; grid-row: 12/14;" class="mu2e_list" id="bias_2_0_c">
                    <input type="text" id="bias_2_0" size="8" value="0x000"></input>&nbsp;
                    <button onclick="setBiasCmd(2,0);">set &#10095;</button>
                </div>
                <div style="grid-column: 5; grid-row: 14/16;" class="mu2e_list" id="bias_2_1_c">
                    <input type="text" id="bias_2_1" size="8" value="0x000"></input>&nbsp;
                    <button onclick="setBiasCmd(2,1);">set &#10095;</button>
                </div>
                <div style="grid-column: 5; grid-row: 16/18;" class="mu2e_list" id="bias_3_0_c">
                    <input type="text" id="bias_3_0" size="8" value="0x000"></input>&nbsp;
                    <button onclick="setBiasCmd(3,0);">set &#10095;</button>
                </div>
                <div style="grid-column: 5; grid-row: 18/20;" class="mu2e_list" id="bias_3_1_c">
                    <input type="text" id="bias_3_1" size="8" value="0x000"></input>&nbsp;
                    <button onclick="setBiasCmd(3,1);">set &#10095;</button>
                </div>

                <!--
                <div style="grid-column: 1; grid-row: 4;" class="mu2e_list">Bias 1:</div>
                <div style="grid-column: 2; grid-row: 4;" class="mu2e_list" name="mu2e_dcs"  data="Bias_1" format="2" units="V">Value</div>
                <div style="grid-column: 3; grid-row: 4;" class="mu2e_list" name="mu2e_dcs"  data="Bias_3" format="2" units="V">Value</div>
                <div style="grid-column: 4; grid-row: 4;" class="mu2e_list" name="mu2e_dcs"  data="Bias_5" format="2" units="V">Value</div>
                <div style="grid-column: 5; grid-row: 4;" class="mu2e_list" name="mu2e_dcs"  data="Bias_7" format="2" units="V">Value</div>

                <div style="grid-column: 1; grid-row: 5;" class="mu2e_list">Bias DAC 0:</div>
                <div style="grid-column: 2; grid-row: 5;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_0" format="hex">Value</div>
                <div style="grid-column: 3; grid-row: 5;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_2" format="hex">Value</div>
                <div style="grid-column: 4; grid-row: 5;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_4" format="hex">Value</div>
                <div style="grid-column: 5; grid-row: 5;" class="mu2e_list" name="mu2e_dcs"  data="BiasDac_6" format="hex">Value</div> -->

            </div>
            <div id="mu2e_dtc_action" class="mu2e_container mu2e_grid">
                <div style="grid-column: 1/1; grid-row: 1" class="mu2e_title">Functions</div>
                <div style="grid-column: 1;   grid-row: 2;"    class="mu2e_list">
                    <button onClick="alert('NOT IMPLEMENTED YET');">Select</button>
                    <button onClick="cmbendaCmd();">CMBENA</button>
                </div>
            </div>
        <!--

  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_BiasDac_0",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_BiasDac_1",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_BiasDac_2",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_BiasDac_3",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_BiasDac_4",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_BiasDac_5",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_BiasDac_6",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_BiasDac_7",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_Bias_0",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_Bias_1",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_Bias_2",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_Bias_3",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_Bias_4",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_Bias_5",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_Bias_6",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_Bias_7",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB0_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB10_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB11_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB12_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB13_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB14_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB15_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB1_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB2_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB3_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB4_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB5_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB6_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB7_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB8_temperature",
  "Mu2e:TDAQ_crv:crvROC09:FEB_p1_CMB9_temperature",

        -->

    </div>

</body>
</html>